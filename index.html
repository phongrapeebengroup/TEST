<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö - ‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡πã‡∏≠‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- LINE LIFF SDK -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f0fdf4; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏á‡πÜ */
        }
        
        /* Custom Scrollbar for Modal */
        .modal-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .modal-scroll::-webkit-scrollbar-track {
            background: #f1f1f1; 
            border-radius: 4px;
        }
        .modal-scroll::-webkit-scrollbar-thumb {
            background: #888; 
            border-radius: 4px;
        }
        .modal-scroll::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }

        .input-group {
            position: relative;
        }
        .input-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #15803d; /* green-700 */
        }
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem; /* left padding for icon */
            border: 1px solid #e5e7eb;
            border-radius: 1rem;
            background-color: #f9fafb;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #10b981;
            background-color: #ffffff;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
        }
    </style>
</head>
<body class="text-gray-800 antialiased">

    <!-- Header Design -->
    <header class="bg-gradient-to-r from-green-700 via-emerald-600 to-teal-500 text-white p-6 rounded-b-[2rem] shadow-xl relative overflow-hidden">
        <!-- Decoration Circles -->
        <div class="absolute top-0 right-0 -mr-4 -mt-4 w-24 h-24 rounded-full bg-white opacity-10"></div>
        <div class="absolute bottom-0 left-0 -ml-4 -mb-4 w-16 h-16 rounded-full bg-white opacity-10"></div>
        
        <div class="container mx-auto text-center relative z-10">
            <div class="bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 backdrop-blur-sm shadow-inner">
                <i class="fa-solid fa-recycle text-3xl"></i>
            </div>
            <h1 class="text-2xl font-bold tracking-wide">‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡πã‡∏≠‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</h1>
            <h2 class="text-sm font-medium opacity-90 tracking-wider">BAANPONG RECYCLE</h2>
            <p class="text-xs mt-2 opacity-80 bg-black/10 inline-block px-3 py-1 rounded-full">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-lg mb-20">
        
        <!-- Loading State -->
        <div id="loading" class="flex flex-col items-center justify-center py-10 space-y-4">
            <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-green-600"></div>
            <p class="text-gray-500 text-sm">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE...</p>
        </div>

        <!-- Form -->
        <form id="bookingForm" class="hidden space-y-6 animate-fade-in-up">
            
            <!-- Section 1: Contact Info -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                <h2 class="text-lg font-bold text-green-800 mb-5 flex items-center border-b pb-2">
                    <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-3 text-green-600">
                        <i class="fa-solid fa-address-card"></i>
                    </div>
                    ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠
                </h2>
                
                <div class="space-y-4">
                    <div class="input-group">
                        <i class="fa-solid fa-user input-icon"></i>
                        <input type="text" id="name" required class="form-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                    </div>
                    
                    <div class="input-group">
                        <i class="fa-solid fa-phone input-icon"></i>
                        <input type="tel" id="phone" required class="form-input" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (10 ‡∏´‡∏•‡∏±‡∏Å)">
                    </div>

                    <div class="input-group">
                        <i class="fa-solid fa-map-location-dot input-icon top-4 transform-none mt-3"></i>
                        <textarea id="address" rows="3" required class="form-input" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ã‡∏≠‡∏¢, ‡∏ñ‡∏ô‡∏ô...)"></textarea>
                    </div>

                    <div class="input-group">
                        <i class="fa-solid fa-calendar-days input-icon"></i>
                        <input type="datetime-local" id="pickupDate" required class="form-input">
                    </div>
                </div>
            </div>

            <!-- Section 2: Materials -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                <h2 class="text-lg font-bold text-yellow-700 mb-2 flex items-center border-b pb-2 border-yellow-100">
                    <div class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center mr-3 text-yellow-600">
                        <i class="fa-solid fa-boxes-packing"></i>
                    </div>
                    ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
                </h2>
                <p class="text-xs text-gray-400 mb-5 pl-11">‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡πÄ‡∏ä‡πà‡∏ô 10 ‡∏Å‡∏¥‡πÇ‡∏•, 2 ‡∏ñ‡∏∏‡∏á)</p>

                <div class="space-y-3 pl-2">
                    <!-- Item 1 -->
                    <div class="flex items-center space-x-3">
                        <div class="w-8 flex justify-center text-gray-400"><i class="fa-solid fa-can-food"></i></div>
                        <div class="flex-1">
                            <label class="text-xs text-gray-500 block mb-1">‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á</label>
                            <input type="text" id="mat_aluminum" class="form-input py-2 text-sm" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...">
                        </div>
                    </div>
                    
                    <!-- Item 2 -->
                    <div class="flex items-center space-x-3">
                        <div class="w-8 flex justify-center text-gray-400"><i class="fa-solid fa-bottle-water"></i></div>
                        <div class="flex-1">
                            <label class="text-xs text-gray-500 block mb-1">‡∏Ç‡∏ß‡∏î PET (‡πÉ‡∏™)</label>
                            <input type="text" id="mat_pet" class="form-input py-2 text-sm" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...">
                        </div>
                    </div>

                    <!-- Item 3 -->
                    <div class="flex items-center space-x-3">
                        <div class="w-8 flex justify-center text-gray-400"><i class="fa-solid fa-box-open"></i></div>
                        <div class="flex-1">
                            <label class="text-xs text-gray-500 block mb-1">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏•‡∏±‡∏á</label>
                            <input type="text" id="mat_cardboard" class="form-input py-2 text-sm" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...">
                        </div>
                    </div>

                     <!-- Item 4 -->
                     <div class="flex items-center space-x-3">
                        <div class="w-8 flex justify-center text-gray-400"><i class="fa-solid fa-wine-bottle"></i></div>
                        <div class="flex-1">
                            <label class="text-xs text-gray-500 block mb-1">‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏£‡∏ß‡∏°</label>
                            <input type="text" id="mat_glass_mix" class="form-input py-2 text-sm" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...">
                        </div>
                    </div>

                    <!-- Item 5 -->
                     <div class="flex items-center space-x-3">
                        <div class="w-8 flex justify-center text-gray-400"><i class="fa-solid fa-crate-apple"></i></div>
                        <div class="flex-1">
                            <label class="text-xs text-gray-500 block mb-1">‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏±‡∏á</label>
                            <input type="text" id="mat_glass_crate" class="form-input py-2 text-sm" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...">
                        </div>
                    </div>

                    <!-- Item 6 -->
                    <div class="flex items-center space-x-3">
                        <div class="w-8 flex justify-center text-gray-400"><i class="fa-solid fa-circle-plus"></i></div>
                        <div class="flex-1">
                            <label class="text-xs text-gray-500 block mb-1">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</label>
                            <input type="text" id="mat_other" class="form-input py-2 text-sm" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏ô‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pre-Submit Button -->
            <button type="submit" class="w-full bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white font-bold py-4 px-6 rounded-2xl shadow-lg shadow-green-200 transition-all duration-300 transform hover:scale-[1.02] flex justify-center items-center text-lg group">
                <span>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                <i class="fa-solid fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
            </button>
        </form>
    </main>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="fixed inset-0 z-50 hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        
        <!-- Modal Content -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden animate-bounce-in">
            <div class="bg-green-50 p-4 border-b border-green-100 flex items-center justify-between">
                <h3 class="text-green-800 font-bold text-lg"><i class="fa-solid fa-clipboard-check mr-2"></i>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fa-solid fa-xmark text-xl"></i>
                </button>
            </div>
            
            <div class="p-5 max-h-[60vh] overflow-y-auto modal-scroll bg-white">
                <p class="text-xs text-gray-400 mb-2 text-center">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</p>
                <!-- Preview Text Area -->
                <div id="previewText" class="bg-gray-50 p-4 rounded-xl text-sm text-gray-700 font-mono border border-gray-200 whitespace-pre-wrap leading-relaxed"></div>
            </div>

            <div class="p-4 bg-white border-t border-gray-100 flex space-x-3">
                <button onclick="closeModal()" class="flex-1 py-3 rounded-xl border border-gray-300 text-gray-600 font-medium hover:bg-gray-50 transition">
                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                </button>
                <button id="finalConfirmBtn" class="flex-1 py-3 rounded-xl bg-green-600 text-white font-bold shadow-md hover:bg-green-700 hover:shadow-lg transition flex justify-center items-center">
                    <span id="btnText">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á</span>
                    <i class="fa-regular fa-paper-plane ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- LIFF CONFIGURATION ---
        const YOUR_LIFF_ID = "2008567177-lVqDkD19"; 

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á
        let messageToSend = "";

        // Animation Classes for Modal
        const modal = document.getElementById('confirmModal');
        const previewText = document.getElementById('previewText');
        const finalConfirmBtn = document.getElementById('finalConfirmBtn');
        const btnText = document.getElementById('btnText');

        async function main() {
            const loading = document.getElementById('loading');
            const form = document.getElementById('bookingForm');

            // Check LIFF ID (Modified: Hide error if ID is missing, just show form for testing)
            if (YOUR_LIFF_ID === "2008567177-lVqDkD19") {
                // ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LIFF ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ (Test Mode)
                loading.style.display = 'none';
                form.classList.remove('hidden'); 
            } else {
                // ‡∏Å‡∏£‡∏ì‡∏µ‡πÉ‡∏™‡πà ID ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
                try {
                    await liff.init({ liffId: YOUR_LIFF_ID });
                    if (liff.isLoggedIn() || liff.isInClient()) {
                        loading.style.display = 'none';
                        form.classList.remove('hidden');
                    } else {
                        liff.login();
                    }
                } catch (err) {
                    loading.innerHTML = `<p class="text-red-500">Error: ${err.message}</p>`;
                    form.classList.remove('hidden');
                }
            }

            // 1. Handle Form Submit -> Show Modal
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                generateMessage(); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                openModal(); // ‡πÄ‡∏õ‡∏¥‡∏î Modal
            });

            // 2. Handle Final Confirm -> Send Message
            finalConfirmBtn.addEventListener('click', async () => {
                // UI Loading State
                btnText.innerText = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';
                finalConfirmBtn.disabled = true;
                finalConfirmBtn.classList.add('opacity-75');

                if (liff.isInClient() && YOUR_LIFF_ID !== "YOUR_LIFF_ID_HERE") {
                    try {
                        await liff.sendMessages([{
                            type: 'text',
                            text: messageToSend
                        }]);
                        liff.closeWindow();
                    } catch (error) {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
                        resetBtn();
                    }
                } else {
                    // Test Mode (Browser or No ID)
                    setTimeout(() => {
                        alert('‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (Test Mode)\n\n‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:\n' + messageToSend);
                        closeModal();
                        resetBtn();
                    }, 1000); // Simulate network delay
                }
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        function generateMessage() {
            const data = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                date: document.getElementById('pickupDate').value,
                items: [
                    { label: '‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á', val: document.getElementById('mat_aluminum').value },
                    { label: '‡∏Ç‡∏ß‡∏î PET', val: document.getElementById('mat_pet').value },
                    { label: '‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏•‡∏±‡∏á', val: document.getElementById('mat_cardboard').value },
                    { label: '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏£‡∏ß‡∏°', val: document.getElementById('mat_glass_mix').value },
                    { label: '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏±‡∏á', val: document.getElementById('mat_glass_crate').value },
                    { label: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ', val: document.getElementById('mat_other').value },
                ]
            };

            const dateObj = new Date(data.date);
            const dateString = dateObj.toLocaleString('th-TH', { dateStyle: 'medium', timeStyle: 'short' });

            let msg = `‚ôªÔ∏è ‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡πã‡∏≠‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•\n`;
            msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            msg += `üë§ ‡∏Ñ‡∏∏‡∏ì: ${data.name}\n`;
            msg += `üìû ‡πÇ‡∏ó‡∏£: ${data.phone}\n`;
            msg += `üóìÔ∏è ‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö: ${dateString}\n`;
            msg += `üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà: ${data.address}\n`;
            msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            msg += `üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏™‡∏î‡∏∏:\n`;

            let hasItems = false;
            data.items.forEach(item => {
                if (item.val && item.val.trim() !== "") {
                    msg += `üîπ ${item.label}: ${item.val}\n`;
                    hasItems = true;
                }
            });

            if (!hasItems) msg += "   (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô)\n";
            msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            msg += `üôè ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡∏£‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏•‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö`;

            messageToSend = msg;
            previewText.textContent = msg; // ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Modal
        }

        // Modal Functions
        function openModal() {
            modal.classList.remove('hidden');
            // Small animation trick
            const content = modal.querySelector('div[class*="absolute top-1/2"]');
            content.classList.remove('scale-95', 'opacity-0');
            content.classList.add('scale-100', 'opacity-100');
        }

        window.closeModal = function() { // Make global
            modal.classList.add('hidden');
            resetBtn();
        }

        function resetBtn() {
            btnText.innerText = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á';
            finalConfirmBtn.disabled = false;
            finalConfirmBtn.classList.remove('opacity-75');
        }

        // Run
        main();
    </script>

    <style>
        /* Animation Helpers */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
    </style>
</body>
</html>
